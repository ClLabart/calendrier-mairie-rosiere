{% extends 'base.html.twig' %}

{% block title %}{{ parent() }}Calendrier{% endblock %}

{% block headerTitle %}{{ parent() }}Calendrier{% endblock %}

{% block body %}

    <div id="calendar"></div>
{% endblock %}

{% block js %}
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            var calendarEl = document.getElementById('calendar');
            var calendar = new FullCalendar.Calendar(calendarEl, {
                initialView: 'dayGridMonth',
                themeSystem: 'bootstrap5',
                events: [
                    {% for event in globalDate %}
                        {
                            title: {{event.date.title}},
                            color: "darkred",
                            start: "{{ event.date.dateStart }}",
                            {% if event.date.dateEnd is defined %}
                                end: "{{ event.date.dateEnd }}",
                            {% else %}
                                allDay : false,
                            {% endif %}
                            id: {{event.id}},
                        },
                    {% endfor %}
                    {% for event in personalDate  %}
                        {
                            title: {{ event.title }},
                            color: "darkred",
                            start: "{{ event.dateStart }}",
                            {% if event.date.dateEnd is defined %}
                                end: "{{ event.dateEnd }}",
                            {% else %}
                                allDay : false,
                            {% endif %}
                            id: {{ event.id }},
                        },
                    {% endfor %}
                    {
                        title  : 'event1',
                        color: "darkred",
                        start  : '2022-11-01',
                        id: 13,
                    },
                    {
                        title  : 'event2',
                        start  : '2022-11-05',
                        end    : '2022-11-07',

                    },
                    {
                        title  : 'event3',
                        start  : '2022-11-09T12:30:00',
                        allDay : false
                    }
                ],
                eventClick: function(calEvent, jsEvent, view) {

                    console.log(calEvent.event.title);
                    console.log(calEvent.event);
                    console.log(calEvent.jsEvent);
                    console.log(calEvent.view.title);

                }
            });
            calendar.render();
        });
    </script>
{% endblock %}